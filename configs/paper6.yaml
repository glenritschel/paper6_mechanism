# configs/paper6.yaml

gse195452:
  adata_path: ../paper4_btcells_liana/work/scored_bt/ssc_pbmc_gse195452.BT.scored.h5ad

  # required obs keys
  cell_type_key: cell_type
  sample_key: sample_id

  # B activation + T programs from Paper 4
  b_activation_key: b_activation
  th2_key: th2
  th17_key: th17

  # labels present in cell_type_key
  b_cell_label: B_cell
  t_cell_label: T_cell

  # expression handling (your AnnData has no .raw and no layers)
  use_raw: false
  layer: null

  # Targeted LGALS9×HAVCR2 interaction scoring (Option A)
  targeted:
    ligand_gene: LGALS9
    receptor_gene: HAVCR2

    # quartile assignment for B_activation:
    # true = compute Q1/Q4 within each sample (required for paired design)
    quartiles_within_sample: true

    # Minimum cell counts required per sample to compute scores
    min_b_cells_per_quartile: 5
    min_t_cells: 10

    # T program aggregation per sample (mean over T cells)
    program_aggregate: mean

liana:
  # Used for the competing interactions analysis (top 10 B→T)
  # Note: LGALS9→HAVCR2 may not appear due to low HAVCR2 prevalence in PBMC T cells.
  resource: consensus
  use_raw: false
  layer: null
  pval_cutoff: 0.05

gse249279:
  adata_path: /home/glen/ssc_data/processed/GSE249279_spatial_merged.h5ad
  use_raw: false
  layer: null
  immune_score_key: T_score

  # immune-enriched spots (computed proxy = T_score + B_score + Plasma_score)
  immune_filter:
    mode: quantile         # options: "quantile" or "obs_bool"
    obs_key: immune_proxy  # if missing, spatial script should compute it
    quantile: 0.90         # q=0.90
    obs_bool_key: is_immune_enriched  # used only if mode=obs_bool

  # colocalization / proximity
  coords_key: spatial      # .obsm["spatial"] typical for Visium
  top_quantile_expr: 0.90  # "LGALS9-high" and "HAVCR2-high" thresholds

outputs:
  reports_dir: reports
  figures_dir: reports/figures
